%---------- 几乎必须 ----------%
\usepackage{xcolor}% 用于各种颜色环境
\usepackage{graphicx}% 加强插图, 含graphics
\graphicspath{{img/}}% 设置图片检索路径
\usepackage{array}% 对表格列格式的扩展。
\usepackage{amsmath}% 提供数学公式支持
\usepackage{fontspec}% 西文字体设置
% 注意，no-math无法直接在Package option list中写
\PassOptionsToPackage{no-math}{fontspec}
% 提供完整的符号命令, 不需要upgreek和bm等数学字体宏包
\usepackage[math-style=ISO]{unicode-math}
\usepackage{bookmark}% 书签增强，一次编译，随意添加

%---------- 广泛 ----------%
\usepackage{float}% Float环境H参数
\usepackage{tcolorbox}% 高度可配置的彩色盒子

%---------- 表格 ----------%
\usepackage{booktabs}% 三线表
\usepackage{diagbox}% 斜线单元格
\usepackage{tabularx}% 均分列宽
\PassOptionsToPackage{table}{xcolor}% 有色表格 加载colortbl

%---------- 图片 ----------%
\usepackage{pdfpages}% 插入整页pdf
\usepackage{subfig}% 用于添加子图

%---------- 浮动体 ---------%
% 增强caption，比如不编号
\usepackage{caption}

%---------- 文字样式 ----------%
\usepackage{ulem}% 可断行下划线

%---------- 排版样式 ----------%
\usepackage{endnote}% 可断行下划线
\usepackage{indentfirst}% 首段缩进

%---------- 布局样式 ----------%
\usepackage{geometry}% 控制版式
\usepackage{fancyhdr}% 排版页眉页脚, 需放在geometry后面

%---------- 分栏 ----------%
\usepackage{multicol}% 多栏排版
\usepackage{paracol}% 多栏对齐排版

%---------- 其他样式 ----------%
\usepackage{transparent}% 提供透明颜色

%---------- 引用 ----------%
\usepackage[style=gb7714-2015]{biblatex}
% 注意
% 与 subfiles 使用，需要补丁
\addbibresource{\subfix{ref.bib}}
% report/book使用refsection，默认的是\bibnam，需要再定义\refname
\providecommand{\refname}{参考文献}

%---------- 公式 ----------%
\usepackage{mathtools}% 简化、增强数学公式
\usepackage{witharrows}% 箭头标注

%---------- TiKz Lib----------%
\usepackage{tikz}
\usetikzlibrary{external}% 保存所画图形
\tikzexternalize[prefix=out/tikz/,optimize command away=\includepdf]
\tcbset{shield externalize} % 屏蔽layer层的externalize, 避免与tcolorbox的冲突

%---------- PGF/TiKz ----------%
\usepackage[siunitx, RPvoltages]{circuitikz}% 电路图
\ctikzset{
    logic ports=ieee,
}
\usepackage[external]{forest}% 树形图
\usepackage{karnaugh-map}% 卡诺图

%---------- 非 TiKz 作图 ----------%
\usepackage{schemata}% 分类图，与 unicode-math 冲突，应在其后再导入

%---------- PDF扩展 ----------%
%% 添加附件
\usepackage{attachfile2}
\usepackage{embedall}
\usepackage{embedfile}
\usepackage{animate}% 添加动画，机制是把javascript写进pdf
\usepackage{ocgx2}% Optional Content Groups, 实现交互式折叠内容

%---------- 其他 ----------%

%---------- 辅助工具 ----------%
\usepackage{zhlipsum}% 中文测试
